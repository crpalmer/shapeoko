; Middle probing for X:
;   * Probe and set zero on the right side of the object being probed
;   * Jog to position the spindle to the left side of the object being
;     probed and close to the object
;   * Run this macro which will touch the object and then set a new zero

; Wait until the planner queue is empty
%wait

; Save modal state
%WCS = modal.wcs
%PLANE = modal.plane
%UNITS = modal.units
%DISTANCE = modal.distance
%FEEDRATE = modal.feedrate
%SPINDLE = modal.spindle
%COOLANT = modal.coolant

G21                                      ; metric
M5                                       ; Stop spindle
G91	                                 ; Relative positioning

G38.2 X10 F22.5                          ; Touch the side
%edgex = posx + global.state.PROBE_DIAMETER/2
G10 L20 X[edgex / 2]                     ; Previous 0 was right side, new zero is middle so pos is half
G1 X-1 F600                              ; Back off a little bit

G90                                      ; Absolute positioning

; Restore modal state
[WCS] [PLANE] [UNITS] [DISTANCE] [FEEDRATE] [SPINDLE] [COOLANT]
